<html>
    <body>
<!-- Crop the image of the tileset to the tile ; used with object-position below -->
<style>
img {
    object-fit:none;
}
</style>
        <div id="map"></div>
        <script>
        function drawMap (width, height, tileSizeX, tileSizeY, layerContent, tilesetWidth, tilesetHeight, firstGid) {
            let map = document.getElementById ("map");
            const mapXSize = width*tileSizeX;
            const mapYSize = height*tileSizeY;
            var layerIndex = 0;
            for (var y = 0; y < mapYSize; y += tileSizeY) {
                var lineDiv = document.createElement ("div");
                for (var x = 0; x < mapXSize; x += tileSizeX) {
                    // The tile ids start at firstGid and increment over every tile in the tileset
                    const tileId = layerContent [layerIndex] - firstGid;
                    var cellImg = document.createElement ("img");
                    // Use the Tiled exported tileset as the source for the image
                    cellImg.setAttribute ("src", "tileset.png");
                    // We show only one tile from the tileset
                    cellImg.setAttribute ("width", tileSizeX + "px");
                    cellImg.setAttribute ("height", tileSizeY + "px");
                    // Offset the tileset image so that the part that is visible is the tile which ID we know
                    const yOffset = tileSizeY * (tileId / tilesetWidth | 0);
                    const xOffset = tileSizeX * (tileId % tilesetWidth);
                    cellImg.setAttribute ("style", "object-position:-" + xOffset + "px -" + yOffset + "px");
                    lineDiv.appendChild (cellImg);
                    layerIndex ++;
                }
                map.appendChild (lineDiv);
            }
        }
        </script>
        <!-- Load the js library used for unzipping the layer -->
        <!-- You can get pako.js from https://raw.githubusercontent.com/nodeca/pako/master/dist/pako.js -->
        <script type="text/javascript" src="pako.js"></script>
        <!-- Load the Tiled map -->
        <script type="text/javascript" src="map.js"></script>
        <!-- Show the first layer of the map, using the first tileset -->
        <script>
            var tileMap;
            for (var mapName in TileMaps) {
                tileMap = TileMaps [mapName];
            }

            // Retrieve the first layer data by unzipping the layer data
            const layer = tileMap.layers [0];
            const layerHeight = layer.height;
            const layerWidth = layer.width;
            // Unzipping the layer data :
            // Decode base64 (convert ascii to binary)..
            const strData     = atob(layer.data);
            // Convert binary string to character-number array..
            const charData    = strData.split('').map(function(x){return x.charCodeAt(0);});
            // Turn number array into byte-array..
            const binData     = new Uint8Array(charData);
            // Unzip..
            const data        = pako.inflate(binData);
            // ..and turn into an array of 32 bytes unsigned integers, containing the tile ids. 
            var layerContent = new Uint32Array(data.buffer);

            // Retrieve tileset size and first tile id
            const tileSet = tileMap.tilesets [0];
            const firstGID = tileSet.firstgid;
            const tilesetWidth = tileSet.imagewidth / tileSet.tilewidth;
            const tilesetHeight = tileSet.imageheight / tileSet.tileheight;

            drawMap (layerWidth, layerHeight, tileSet.tilewidth, tileSet.tileheight, layerContent, tilesetWidth, tilesetHeight, firstGID);
        </script>
    </body>
</html>

